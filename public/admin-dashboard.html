<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Administrativo - Katana</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/admin-dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div id="adminLoginModal" class="admin-login-modal">
        <div class="admin-login-content">
            <h2>Acceso de Administrador</h2>
            <form id="adminLoginForm">
                <div class="form-group"> <label for="adminUsername" class="form-label">Usuario:</label> <input type="text" id="adminUsername" name="adminUsername" class="form-control" required> </div>
                <div class="form-group"> <label for="adminPassword" class="form-label">Contraseña:</label> <input type="password" id="adminPassword" name="adminPassword" class="form-control" required> </div>
                <p id="adminLoginMessage"></p> <button type="submit" class="admin-btn btn-primary">Ingresar</button>
            </form>
        </div>
    </div>

    <div class="admin-container hidden-for-login">
        <aside class="admin-sidebar">
            <div class="sidebar-header"> <img src="/Katana-main/public/images/LOGO-SIN-FONDO.png" alt="Katana Logo" class="admin-logo"> <button class="sidebar-toggle"> <i class="fas fa-bars"></i> </button> </div>
            <ul class="admin-menu">
                 <li class="menu-item"> <a href="#dashboard" class="menu-link active" data-section="dashboardContent"> <i class="fa-solid fa-torii-gate"></i> <span>Dashboard</span> </a> </li>
                 <li class="menu-item"> <a href="#pedidos" class="menu-link" data-section="ordersContent"> <svg width="20px" height="20px" viewBox="0 0 512 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg" style="margin-right: 15px; vertical-align: middle;">
                    <g>
                        <path d="M293.176,212.127c10.723-4.479,21.592-9.006,32.167-13.411c1.602-29.143-9.087-53.529-3.743-95.895 c3.351-26.601,15.021-40.919,26.561-48.168c-10.134-0.899-30.647-1.61-54.755,3.514c-13.386,15.43-21.003,37.086-20.35,64.954 c0.556,23.243,20.284,55.123,20.153,79.534C293.208,205.899,293.193,209.045,293.176,212.127z"></path>
                        <path d="M227.814,226.689c0.638,3.939,1.112,8.238,1.455,12.504c3.939-2.002,8.042-3.922,12.324-5.687 c6.014-2.469,12.52-5.165,19.352-8.001c0.033-5.712,0.066-11.915,0.081-17.579c0.082-16.271-3.546-29.698-10.133-67.471 c-5.263-30.091,1.079-55.303,11.817-72.726c-14.53,5.132-32.591,11.94-51.584,19.696c-7.993,13.427-14.041,31.856-9.579,60.034 C205.291,171.166,225.248,210.68,227.814,226.689z"></path>
                        <path d="M137.852,307.539c8.516-0.041,17.064-2.795,24.076-8.564c0,0,0.327-0.54,0.85-1.332 c4.266,3.964,8.401,7.789,12.144,11.221c5.083,4.65,9.545,8.663,13.092,11.777c1.798,1.552,3.35,2.86,4.674,3.964 c1.389,1.111,2.387,1.904,3.711,2.77c3.253,2.027,7.764,5.076,13.436,7.674c5.687,2.608,12.699,4.757,20.79,4.79 c6.358,0.041,13.305-1.267,20.48-4.299l0.082-0.024l118.123-52.818c7.748-3.244,14.024-6.268,19.303-9.684 c3.972-2.591,7.437-5.419,10.265-8.77c4.299-4.993,6.816-11.024,8.008-17.137c1.226-6.163,1.423-12.545,1.471-20.007 c0.017-4.65-0.032-9.733-0.032-15.405l0.016-45.97c14.367-2.786,36.694-0.833,36.694-0.833c7.6-0.368,14.269-5.222,16.966-12.349 c2.68-7.102,0.899-15.16-4.577-20.464L393.32,69.935c-8.924-8.647-17.914-11.474-31.872-13.591 c-7.028,6.84-11.752,17.75-15.02,38.836c-3.612,23.299,3.285,63.025,6.096,92.266c13.943-5.786,26.348-10.885,35.599-14.587 l-0.016,38.826c-0.017,5.819,0.049,10.918,0.032,15.315c-0.032,6.301-0.245,11.213-0.833,14.825c-0.458,2.73-1.063,4.69-1.847,6.3 c-1.193,2.37-2.812,4.373-6.538,7.036c-3.71,2.608-9.43,5.582-17.636,8.974l-0.115,0.049l-117.943,52.736 c-4.87,2.027-8.908,2.689-12.52,2.689c-4.577-0.024-8.581-1.177-12.488-2.958c-3.857-1.765-7.453-4.102-11-6.366 c-0.115-0.074-0.998-0.744-2.125-1.659c-4.348-3.596-12.962-11.368-23.128-20.758c-2.174-2.01-4.528-4.217-6.816-6.342 c6.816-7.804,16.346-17.293,28.604-26.413c0.425-4.381,0.556-8.565-0.016-11.646c-4.315-24.011-13.109-46.28-22.719-80.114 c-6.816-23.953-2.124-47.334,4.79-65.273c-16.541,7.2-32.788,14.768-47.008,22.196c-21.428,44.131-15.953,95.6-6.98,124.237 C138.702,266.546,140.402,290.434,137.852,307.539z"></path>
                        <path d="M111.063,296.891c0.098,0.098,0.212,0.163,0.31,0.261c1.471-11.082,1.03-30.425-5.818-68.264 c-8.009-44.188,0.931-75.308,11.491-96.279c-41.974,26.119-60.248,52.459-60.248,52.459c-9.398,16.058-11.294,22.016-11.735,32.886 c-0.458,10.885,1.602,16.508,9.399,24.084L111.063,296.891z"></path>
                        <path d="M8.712,404.357l494.592-0.63c4.805,0,8.679-3.89,8.679-8.679v-18.086c0-2.353-0.948-4.61-2.648-6.244 c-1.7-1.642-3.988-2.516-6.325-2.435L8.385,385.413C3.711,385.585,0,389.418,0,394.093v1.577c0,2.312,0.932,4.519,2.55,6.146 C4.184,403.45,6.391,404.357,8.712,404.357z"></path>
                        <path d="M503.321,422.532l-494.609-0.63c-2.304,0-4.511,0.916-6.146,2.542c-1.634,1.634-2.55,3.84-2.55,6.154v1.569 c0,4.675,3.71,8.516,8.384,8.679l494.61,17.13c2.353,0.082,4.641-0.793,6.342-2.427c1.683-1.642,2.648-3.89,2.648-6.252v-18.078 C512,426.423,508.11,422.532,503.321,422.532z"></path>
                    </g>
                </svg> <span>Pedidos</span> </a> </li>
                 <li class="menu-item"> <a href="#clientes" class="menu-link" data-section="customersContent"> <svg width="20px" height="20px" viewBox="0 0 512 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg" style="margin-right: 15px; vertical-align: middle;">
                    <g>
                        <path d="M356.1 32.57l50 25c-2.2 8.68-9.2 22.47-20.1 37.29C372.7 113 354.4 133.3 335.6 152c-18.7 18.8-38.1 36.2-53.5 48.7-7.7 6.2-14.5 11.3-19.6 14.6-2.5 1.6-4.6 2.9-6 3.6-.3.1-.3.1-.5.1s-.2 0-.5-.1c-1.4-.7-3.5-2-6-3.6-5.1-3.3-11.9-8.4-19.6-14.6-15.4-12.5-34.8-29.9-53.5-48.7-18.8-18.7-37.1-39-50.4-57.13-10.9-14.83-17.9-28.62-20.1-37.3l50-25c14.6 29.73 29.3 62.14 44.2 90.03 16.2 30.5 31.6 55.7 51.9 65.9l4 2 4-2c20.3-10.2 35.7-35.4 51.9-65.9 14.9-27.89 29.6-60.31 44.2-90.03z"></path>
                        <path d="M256 141.4c7.9 0 15.5.7 22.7 1.9-8.2 12.2-16 21.5-22.7 26.5-6.7-5-14.5-14.3-22.7-26.5 7.2-1.2 14.8-1.9 22.7-1.9zm83.1 32.5c23.3 22.7 35.9 54.6 35.9 86.5v.6c-33-12-75.9-17.6-119-17.6-43.1 0-86 5.6-119 17.6v-.6c0-31.9 12.6-63.8 35.9-86.5 16.2 15.6 32.2 29.8 45.7 40.7 8 6.5 15.1 11.9 21 15.7 2.9 2 5.5 3.5 8 4.7 2.5 1.2 4.4 2.4 8.4 2.4s5.9-1.2 8.4-2.4 5.1-2.7 8-4.7c5.9-3.8 13-9.2 21-15.7 13.5-10.9 29.5-25.1 45.7-40.7zm64.3 38.3c20.6 20 31.5 26.2 63.8 37.3-12.6 24.9-25.9 47.1-57 61.2l-17.3-52c-.1-5.7-.5-11.4-1.3-17.1zm-294.8 0l11.8 29.4c-.8 5.7-1.2 11.4-1.3 17.1l-17.3 52c-31.11-14.1-44.41-36.3-57.01-61.2 32.3-11.1 43.2-17.3 63.81-37.3zM265 261.5c45.1.9 89.3 8.7 117.2 22.2l28.4 85-43.3-19.8c-3.9-23.6-6.3-46.3-6.3-58.5v-14.6l-13 6.5c-27.9 14-55.5 21.6-83 23zm-18 0v43.8c-27.5-1.4-55.1-9-83-23l-13-6.5v14.6c0 12.2-2.4 34.9-6.3 58.5l-43.3 19.8 28.4-85c27.9-13.5 72.1-21.3 117.2-22.2zm96.6 42.8c1.3 18.6 4.8 43.5 9.6 67.6 3 15.4 6.6 30.2 10.5 42.4 3.9 12.3 7.3 21.8 13.9 28.5l2.7 2.6h3.7c14.1 0 38.9 1.2 52.7 9.6-1.8 1.4-4.8 3.2-8.7 4.9-9.4 4-23.9 7.7-41.5 10.6-35.2 5.9-82.9 8.9-130.5 8.9-47.6 0-95.3-3-130.5-8.9-17.6-2.9-32.11-6.6-41.51-10.6-3.9-1.7-6.9-3.5-8.7-4.9 13.7-8.4 38.61-9.6 52.71-9.6h3.7l2.7-2.6c6.6-6.7 10-16.2 13.9-28.5 3.9-12.2 7.5-27 10.5-42.4 4.8-24.1 8.3-49 9.6-67.6 58 25.3 117.2 25.3 175.2 0zm-202.8 66.2c-2.9 14.1-6.2 27.6-9.6 38.4-2.9 9.1-6.1 15.3-8.1 18.5-11.2-.1-27.71 0-43.01 5.1l13.5-40.4zm230.4 0l47.2 21.6 13.5 40.4c-15.3-5.1-31.8-5.2-43-5.1-2-3.2-5.2-9.4-8.1-18.5-3.4-10.8-6.7-24.3-9.6-38.4z"></path>
                    </g>
                </svg> <span>Clientes</span> </a> </li>
                 <li class="menu-item"> <a href="#registrarPedido" class="menu-link" data-section="registrarPedidoContent"> <svg width="20px" height="20px" viewBox="0 0 512 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg" style="margin-right: 15px; vertical-align: middle;">
                    <path d="M58.31 24.814L44.187 90.339 27.05 50.894c-3.463 13.536-3.63 28.752-2.328 42.395 7.427 74.81 70.83 162.556 154.83 236.173 15.377-15.942 30.388-32.237 44.783-48.732 6.82-7.815 13.5-15.678 20.018-23.568-59.05-73.228-104.055-148.414-115.58-214.524-4.027-11.108-15.646-14.908-25.596-17.36l11.53 19.868-31.305-22.445c-8.441-.189-17.618.604-25.092 2.113zm370.083-2.107c-2.92 13.842-5.738 27.685-15.046 41.527-.164-13.921-2.092-26.96-7.856-38.082-8.462 2.643-20.526 7.494-22.291 16.486-13.393 76.824-71.978 165.906-145.301 249.926C172.826 367.13 95.984 437.277 27.608 489.355c80.91-12.026 184.614-63.92 272.556-133.086 27.835-21.892 54.063-45.515 77.6-70.025-6.727 1.124-13.617 1.631-20.291 1.77l58.447-45.325c39.982-50.437 66.671-102.466 71.33-149.4.915-9.209 1.368-22.729-.642-34.805-2.01-12.077-6.486-21.931-13.252-26.371-8.677-5.693-24.034-9.17-39.578-9.45a98.183 98.183 0 0 0-5.385.044zM331.34 354.146a859.987 859.987 0 0 1-20.049 16.271 870.556 870.556 0 0 1-39.12 29.034c22.924 14.884 46.287 28.409 69.511 40.25a13010.71 13010.71 0 0 1 57.932 7.04c-5.536 5.312-11.915 8.882-18.942 11.292 36.526 15.689 71.873 26.592 103.694 31.322-49.14-37.427-102.652-84.185-153.026-135.209z"></path>
                </svg> <span>Registrar Pedido</span> </a> </li>
                 <li class="menu-item"> <a href="#productos" class="menu-link" data-section="productsContent"> <i class="fas fa-box"></i> <span>Productos</span> </a> </li>
                 <li class="menu-item"> <a href="#premios" class="menu-link" data-section="premiosContent"> <i class="fas fa-star"></i> <span>Gestión de Premios</span> </a> </li>
                 <li class="menu-item"> <a href="#reportes" class="menu-link" data-section="reportsContent"> <svg width="20px" height="20px" viewBox="0 0 32 32" fill="currentColor" version="1.1" xmlns="http://www.w3.org/2000/svg" style="margin-right: 15px; vertical-align: middle;">
                    <g> <path d="M3 29v-25h25v25h-25zM26 6h-21v6h2.017c0.149-1.12 0.746-1.959 1.462-1.959 0.717 0 1.314 0.839 1.462 1.959h1.071c0.144-1.131 0.745-1.979 1.466-1.979s1.322 0.849 1.466 1.979h7.067c0.144-1.131 0.745-1.979 1.466-1.979 0.722 0 1.322 0.849 1.467 1.979h2.056v-6zM26 13h-2.050c-0.134 1.151-0.741 2.021-1.472 2.021-0.729 0-1.336-0.869-1.471-2.021h-7.057c-0.134 1.151-0.741 2.021-1.471 2.021s-1.337-0.87-1.471-2.021h-1.057c-0.129 1.161-0.738 2.041-1.472 2.041s-1.343-0.88-1.472-2.041h-2.007v7h7.992c0.144-1.131 0.746-1.979 1.466-1.979 0.721 0 1.323 0.849 1.467 1.979h0.999c0.129-1.161 0.738-2.042 1.473-2.042 0.733 0 1.342 0.881 1.472 2.042h1.12c0.139-1.142 0.744-2 1.47-2s1.331 0.858 1.47 2h2.071v-7zM26 21h-2.072c-0.139 1.141-0.744 2-1.47 2s-1.331-0.859-1.47-2h-1.13c-0.149 1.119-0.746 1.958-1.462 1.958s-1.314-0.839-1.463-1.958h-1.004c-0.134 1.151-0.741 2.021-1.471 2.021-0.729 0-1.336-0.869-1.471-2.021h-7.987v6h21v-6z"></path>
                    </g>
                </svg> <span>Reportes</span> </a> </li>
                 <li class="menu-item"> <a href="#configuracion" class="menu-link" data-section="configuracionContent"> <svg width="20px" height="20px" viewBox="0 0 511.996 511.996" fill="currentColor" xmlns="http://www.w3.org/2000/svg" style="margin-right: 15px; vertical-align: middle;">
                    <g> <g>
                        <path d="M511.777,228.173c-5.204-27.057-14.634-52.973-28.011-77.004c-0.73-1.324-1.691-2.465-2.818-3.403 c-0.247-1.44-0.75-2.837-1.526-4.128c-14.152-23.573-31.874-44.688-52.674-62.758c-1.136-0.986-2.425-1.726-3.799-2.221 c-0.723-1.271-1.675-2.415-2.846-3.369c-21.447-17.415-45.308-31.217-70.893-41.012c-1.435-0.556-2.912-0.802-4.367-0.793 c-1.098-0.937-2.376-1.695-3.815-2.191c-25.897-8.947-53.045-13.714-80.68-14.168c-0.073-0.001-0.147-0.002-0.222-0.002 c-1.43,0-2.819,0.262-4.125,0.744c-1.371-0.507-2.835-0.769-4.345-0.743c-7.933,0.131-15.936,0.624-23.786,1.467 c-4.304,0.462-7.417,4.326-6.955,8.629c0.462,4.304,4.339,7.421,8.629,6.955c6.143-0.66,12.385-1.092,18.615-1.289v135.393v0.27 c-0.464,0.032-0.927,0.076-1.391,0.114c-0.207,0.017-0.414,0.032-0.621,0.051c-1.425,0.125-2.846,0.276-4.262,0.456 c-0.186,0.023-0.371,0.05-0.556,0.074c-2.924,0.385-5.825,0.886-8.702,1.502c-0.179,0.039-0.358,0.075-0.537,0.114 c-1.393,0.305-2.779,0.639-4.161,0.999c-0.195,0.051-0.39,0.103-0.584,0.156c-0.443,0.118-0.887,0.23-1.329,0.353l-16.757-46.061 l-29.612-81.398c5.648-1.853,11.401-3.51,17.151-4.938c4.199-1.044,6.759-5.294,5.716-9.495c-1.044-4.199-5.298-6.759-9.495-5.716 c-7.414,1.842-14.833,4.041-22.059,6.537c-1.436,0.497-2.717,1.252-3.814,2.191c-1.445-0.011-2.912,0.233-4.332,0.779 c-25.614,9.806-49.475,23.608-70.93,41.03c-1.168,0.951-2.118,2.094-2.84,3.364c-1.374,0.495-2.663,1.235-3.798,2.221 c-20.799,18.068-38.521,39.184-52.674,62.759c-0.774,1.289-1.278,2.686-1.523,4.124c-1.125,0.934-2.081,2.069-2.805,3.379 C14.851,175.202,5.422,201.118,0.22,228.164c-0.61,3.155,0.059,6.357,1.883,9.016c1.811,2.645,4.66,4.484,7.833,5.051 l135.372,23.882l-0.001,0.003l62.342,10.993l-31.644,5.58l1.347,7.707c1.606,9.195,4.801,17.969,9.491,26.069 c4.661,8.073,10.659,15.221,17.829,21.247c7.184,6.03,15.263,10.7,24.007,13.879c6.294,2.292,12.822,3.756,19.483,4.405v9.309 H235.1c-4.328,0-7.837,3.509-7.837,7.837v31.229c0,4.328,3.509,7.837,7.837,7.837s7.837-3.509,7.837-7.837v-23.392h26.122V479.2 h-26.122v-30.594c0-4.328-3.509-7.837-7.837-7.837s-7.837,3.509-7.837,7.837v38.43c0,4.328,3.509,7.837,7.837,7.837h41.795 c4.329,0,7.837-3.509,7.837-7.837V373.144c0-4.328-3.508-7.837-7.837-7.837h-13.061v-9.309c6.661-0.649,13.189-2.114,19.479-4.404 c8.749-3.181,16.826-7.85,24.014-13.884c7.168-6.025,13.166-13.173,17.821-21.235c4.694-8.108,7.889-16.882,9.495-26.078 l1.347-7.708l-31.644-5.58l62.342-10.993l-0.001-0.003l53.386-9.419c4.262-0.751,7.108-4.817,6.356-9.079 c-0.751-4.262-4.817-7.112-9.078-6.355l-53.892,9.508c-0.131-0.489-0.272-0.974-0.409-1.46c-0.065-0.23-0.128-0.46-0.193-0.689 c-0.39-1.354-0.806-2.699-1.247-4.035c-0.079-0.239-0.161-0.478-0.241-0.717c-0.464-1.374-0.947-2.741-1.465-4.094 c-0.014-0.036-0.028-0.07-0.042-0.106c-0.515-1.342-1.062-2.672-1.629-3.993c-0.087-0.201-0.17-0.402-0.257-0.603 c-0.568-1.302-1.163-2.592-1.783-3.873c-0.103-0.214-0.209-0.426-0.313-0.639c-0.194-0.395-0.382-0.793-0.582-1.187l54.784-31.639 l61.774-35.676c11.036,20.56,19.027,42.522,23.791,65.389l-37.198,6.563c-4.262,0.751-7.108,4.817-6.356,9.079 c0.751,4.262,4.819,7.109,9.078,6.355l40.904-7.216c3.156-0.564,6.004-2.403,7.817-5.046 C511.716,234.521,512.385,231.319,511.777,228.173z M347.073,50.274c21.589,8.651,41.814,20.353,60.209,34.833l-86.944,103.664 c-0.41-0.292-0.826-0.572-1.238-0.857c-0.15-0.103-0.3-0.209-0.45-0.311c-1.195-0.817-2.404-1.61-3.629-2.378 c-0.147-0.093-0.297-0.183-0.444-0.275c-2.529-1.57-5.117-3.036-7.762-4.397c-0.141-0.073-0.281-0.147-0.423-0.219 c-1.285-0.654-2.584-1.281-3.895-1.885c-0.179-0.083-0.357-0.163-0.537-0.245c-0.408-0.185-0.813-0.376-1.224-0.557l0.093-0.257 l-0.001-0.001L347.073,50.274z M295.362,192.42c0.044,0.02,0.09,0.038,0.134,0.057c1.023,0.465,2.034,0.958,3.041,1.46 c0.243,0.121,0.492,0.232,0.734,0.355c2.517,1.28,4.977,2.672,7.373,4.173c0.066,0.042,0.131,0.087,0.196,0.129 c1.115,0.703,2.218,1.427,3.306,2.178c0.027,0.019,0.054,0.04,0.081,0.059l-31.667,37.762L295.362,192.42z M263.834,233.223 v-48.947c0.049,0.004,0.099,0.005,0.148,0.009c1.092,0.091,2.179,0.211,3.264,0.338c0.3,0.036,0.601,0.058,0.901,0.096 c2.796,0.354,5.57,0.831,8.316,1.43c0.04,0.008,0.079,0.02,0.12,0.028c1.318,0.289,2.63,0.607,3.934,0.953 c0.027,0.007,0.054,0.016,0.08,0.023L263.834,233.223z M312.915,222.016l9.434-11.25c0.049,0.047,0.1,0.092,0.149,0.139 c0.728,0.705,1.435,1.432,2.139,2.16c0.276,0.283,0.561,0.558,0.832,0.845c0.883,0.935,1.744,1.89,2.588,2.86 c0.079,0.091,0.163,0.177,0.241,0.269c0.934,1.08,1.843,2.181,2.728,3.303c0.055,0.07,0.107,0.143,0.161,0.213 c0.813,1.036,1.607,2.089,2.378,3.159c0.021,0.029,0.04,0.059,0.061,0.088l-28.634,16.534l-14.427,8.331L312.915,222.016z M263.832,168.28V32.889c23.426,0.739,46.436,4.775,68.513,12.022l-44.092,121.202l-2.276,6.256 c-0.443-0.123-0.888-0.236-1.332-0.354c-0.193-0.051-0.387-0.103-0.58-0.155c-1.382-0.359-2.77-0.694-4.165-1 c-0.177-0.039-0.354-0.074-0.531-0.113c-2.879-0.616-5.784-1.117-8.709-1.503c-0.184-0.024-0.368-0.05-0.553-0.073 c-1.417-0.18-2.838-0.33-4.264-0.456c-0.206-0.018-0.413-0.034-0.62-0.051c-0.464-0.038-0.927-0.082-1.392-0.114V168.28z M255.997,260.134c9.049,0,16.411,7.362,16.411,16.411c0,9.05-7.362,16.411-16.411,16.411c-9.049,0-16.411-7.362-16.411-16.411 S246.949,260.134,255.997,260.134z M231.475,187.13c1.289-0.342,2.586-0.654,3.888-0.941c0.057-0.013,0.114-0.028,0.171-0.041 c2.744-0.599,5.516-1.075,8.311-1.429c0.305-0.039,0.613-0.063,0.918-0.098c1.08-0.126,2.162-0.247,3.248-0.335 c0.049-0.004,0.099-0.005,0.148-0.009v48.946l-16.764-46.069C231.423,187.146,231.449,187.137,231.475,187.13z M213.43,193.951 c1.018-0.507,2.04-1.005,3.075-1.475c0.043-0.02,0.087-0.037,0.13-0.055l16.803,46.175l-31.671-37.765 c0.027-0.019,0.053-0.04,0.08-0.057c1.092-0.753,2.198-1.481,3.316-2.185c0.063-0.04,0.123-0.083,0.187-0.122 c2.397-1.503,4.857-2.894,7.375-4.174C212.958,194.174,213.196,194.067,213.43,193.951z M221.426,248.664L178.367,223.8 c0.022-0.03,0.042-0.063,0.064-0.093c0.757-1.05,1.537-2.082,2.334-3.1c0.069-0.089,0.134-0.181,0.204-0.269 c0.884-1.12,1.793-2.22,2.725-3.3c0.08-0.093,0.166-0.182,0.248-0.275c0.843-0.969,1.703-1.923,2.586-2.857 c0.259-0.274,0.531-0.536,0.792-0.807c0.718-0.742,1.439-1.483,2.182-2.203c0.047-0.045,0.095-0.088,0.142-0.133L221.426,248.664z M164.921,50.275l27.616,75.907l18.631,51.209h-0.001l0.093,0.257c-0.406,0.179-0.809,0.368-1.213,0.552 c-0.185,0.085-0.371,0.167-0.556,0.253c-1.305,0.601-2.598,1.226-3.877,1.876c-0.152,0.077-0.301,0.157-0.451,0.234 c-2.63,1.353-5.204,2.812-7.719,4.373c-0.162,0.1-0.324,0.2-0.485,0.3c-1.215,0.763-2.416,1.55-3.602,2.36 c-0.158,0.108-0.315,0.218-0.472,0.327c-0.409,0.282-0.821,0.56-1.227,0.848L104.711,85.11 C123.107,70.627,143.329,58.927,164.921,50.275z M92.711,95.196l18.718,22.316l67.94,80.999l0.178,0.211 c-0.192,0.182-0.371,0.376-0.562,0.559c-0.833,0.799-1.646,1.619-2.453,2.442c-0.427,0.436-0.863,0.863-1.283,1.306 c-1.192,1.258-2.359,2.538-3.491,3.849c-0.186,0.215-0.359,0.441-0.543,0.658c-0.954,1.123-1.889,2.261-2.798,3.422 c-0.393,0.503-0.769,1.018-1.154,1.527c-0.682,0.903-1.357,1.811-2.012,2.734c-0.166,0.235-0.347,0.459-0.511,0.695L48.642,148.87 l-0.665-0.386C60.284,128.68,75.31,110.782,92.711,95.196z M156.121,230.549c-0.108,0.218-0.215,0.437-0.322,0.656 c-0.619,1.28-1.214,2.57-1.782,3.871c-0.086,0.195-0.167,0.393-0.251,0.588c-0.573,1.334-1.125,2.677-1.645,4.032 c-0.008,0.023-0.018,0.045-0.027,0.068c-0.52,1.36-1.006,2.734-1.472,4.116c-0.078,0.232-0.158,0.464-0.235,0.696 c-0.442,1.339-0.859,2.686-1.249,4.043c-0.066,0.23-0.13,0.462-0.194,0.693c-0.136,0.486-0.278,0.97-0.408,1.458L16.346,227.448 c4.759-22.853,12.748-44.809,23.791-65.389l70.968,40.985l45.591,26.329C156.499,229.763,156.313,230.157,156.121,230.549z M164.045,253.506c0.011-0.046,0.022-0.092,0.034-0.138c0.331-1.169,0.692-2.327,1.067-3.481c0.063-0.193,0.116-0.391,0.181-0.584 c0.451-1.357,0.933-2.704,1.445-4.039c0.088-0.23,0.189-0.455,0.279-0.683c0.428-1.09,0.867-2.175,1.336-3.25 c0.184-0.422,0.387-0.836,0.578-1.255c0.396-0.872,0.792-1.746,1.216-2.607c0.038-0.077,0.08-0.153,0.118-0.23l43.301,25.004 L164.045,253.506z M317.382,295.323c-1.413,4.623-3.353,9.075-5.803,13.308c-3.745,6.487-8.568,12.234-14.333,17.079 c-5.776,4.849-12.266,8.603-19.293,11.156c-7.022,2.557-14.408,3.853-21.956,3.853c-7.548,0-14.936-1.297-21.961-3.855 c-7.022-2.553-13.512-6.306-19.286-11.152c-5.766-4.846-10.589-10.593-14.34-17.09c-2.447-4.227-4.386-8.678-5.798-13.298 l32.115-5.662c5.025,11.169,16.25,18.968,29.27,18.968c13.019,0,24.245-7.8,29.27-18.968L317.382,295.323z M298.394,262.245 l10.24-5.913l33.063-19.091c0.037,0.075,0.078,0.148,0.115,0.223c0.423,0.861,0.819,1.734,1.215,2.606 c0.192,0.423,0.397,0.841,0.583,1.268c0.447,1.024,0.863,2.059,1.274,3.097c0.111,0.282,0.235,0.559,0.344,0.842 c0.509,1.327,0.988,2.667,1.438,4.017c0.094,0.281,0.172,0.568,0.262,0.851c0.343,1.065,0.678,2.132,0.983,3.209 c0.015,0.051,0.026,0.103,0.041,0.155L298.394,262.245z M463.353,148.848v0.021l-89.347,51.6l-26.749,15.449 c-0.168-0.241-0.352-0.47-0.522-0.709c-0.648-0.914-1.316-1.812-1.991-2.705c-0.389-0.515-0.77-1.037-1.167-1.544 c-0.903-1.152-1.832-2.282-2.778-3.398c-0.191-0.225-0.371-0.459-0.563-0.682c-1.128-1.308-2.293-2.585-3.482-3.84 c-0.43-0.455-0.879-0.893-1.318-1.342c-0.794-0.811-1.594-1.616-2.414-2.403c-0.194-0.187-0.377-0.385-0.573-0.57l0.177-0.211 l15.441-18.411l71.212-84.907c17.402,15.584,32.424,33.477,44.73,53.278L463.353,148.848z"></path> </g> </g>
                </svg> <span>Configuración</span> </a> </li>
            </ul>
            <div class="sidebar-footer" style="display: flex; flex-direction: column; align-items: center; margin-top: auto; padding: 1.5rem 0;">
                <button id="adminLogoutButton" class="admin-btn btn-danger" title="Cerrar sesión de administrador" style="width: 80%; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-sign-out-alt"></i> <span class="logout-text">Salir</span>
                </button>
            </div>
        </aside>

        <main class="admin-main">
            <header class="admin-header">
                <h1 class="header-title">Dashboard</h1>
                 <div class="admin-user-area" style="display: flex; align-items: center; gap: 20px;">
                    <div class="admin-notification">
                        <button class="notification-btn" id="adminNotificationBtn" title="Notificaciones">
                            <i class="fas fa-bell"></i>
                            <span class="notif-badge" id="adminNotifBadge">0</span>
                        </button>
                        <div class="notif-dropdown" id="adminNotifDropdown">
                            <div class="notif-dropdown-header">Notificaciones</div>
                            <ul class="notif-list" id="adminNotifList">
                                <li>No hay notificaciones nuevas.</li>
                            </ul>
                            <div class="notif-dropdown-footer">
                                <a href="#" id="markAllAsReadBtn">Marcar todas como leídas</a>
                            </div>
                        </div>
                    </div>
                    <div class="admin-user">
                        <div class="user-info">
                            <span class="user-name" id="adminSidebarUsername">Admin</span>
                            <span class="user-role" id="adminSidebarRole">Administrador</span>
                        </div>
                    </div>
                </div>
            </header>

            <section id="dashboardContent" class="dashboard-section active">
                <div class="dashboard-grid">
                    <div class="stat-card"> <div class="stat-header"><div class="stat-icon orders"><i class="fas fa-shopping-cart"></i></div></div> <div class="stat-value" id="statTotalOrders">0</div> <div class="stat-label">Total Pedidos</div> </div>
                    <div class="stat-card"> <div class="stat-header"><div class="stat-icon users"><i class="fas fa-users"></i></div></div> <div class="stat-value" id="statTotalCustomers">0</div> <div class="stat-label">Clientes Registrados</div> </div>
                    <div class="stat-card"> <div class="stat-header"><div class="stat-icon revenue"><i class="fas fa-dollar-sign"></i></div></div> <div class="stat-value" id="statMonthlyRevenue">$0</div> <div class="stat-label">Ingresos Mensuales (Est)</div> </div>
                    <div class="stat-card"> <div class="stat-header"><div class="stat-icon products"><i class="fas fa-box"></i></div></div> <div class="stat-value" id="statActiveProducts">0</div> <div class="stat-label">Productos Activos</div> </div>
                </div>

                <div class="recent-activity-section">
                    <h2>Actividad Reciente</h2>
                    <div class="activity-grid">
                        <div class="activity-list-card">
                            <h3><i class="fas fa-receipt"></i> Pedidos Recientes</h3>
                            <ul class="activity-list" id="recentOrdersList">
                                <li class="loading-placeholder">Cargando...</li>
                                </ul>
                        </div>
                        <div class="activity-list-card">
                            <h3><i class="fas fa-user-plus"></i> Clientes Recientes</h3>
                            <ul class="activity-list" id="recentCustomersList">
                                 <li class="loading-placeholder">Cargando...</li>
                                </ul>
                        </div>
                        <div class="activity-list-card">
                            <h3><i class="fas fa-plus-circle"></i> Productos Añadidos</h3>
                            <ul class="activity-list" id="recentProductsList">
                                 <li class="loading-placeholder">Cargando...</li>
                                </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section id="ordersContent" class="dashboard-section">
                <div class="orders-section">
                    <div class="section-header" style="display:flex;align-items:center;justify-content:space-between;gap:1.5rem;">
                        <div class="header-actions" style="display:flex;align-items:center;gap:1rem;">
                            <div class="filters-group" style="display:flex;align-items:center;gap:1rem;background:#f8f9fa;padding:0.5rem;border-radius:8px;margin-right:1rem;">
                                <div class="date-filter" style="position:relative;">
                                    <input type="date" id="filtroFechaPedidos" class="form-control" style="width:auto;padding-right:2rem;background:#fff;border:1px solid #dee2e6;border-radius:6px;height:38px;">
                                    <i class="fas fa-calendar-alt" style="position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#6c757d;pointer-events:none;"></i>
                                </div>
                            </div>
                            <button class="admin-btn btn-success" id="openRegisterOrderModalBtn">
                                <i class="fas fa-plus"></i> Registrar Pedido
                            </button>
                            <button class="admin-btn btn-pdf" id="exportAdminOrdersPdfBtn"> <i class="fas fa-file-pdf"></i> PDF
                            </button>
                            <button class="admin-btn btn-csv" id="exportCsvBtn">
                                <i class="fas fa-file-csv"></i> CSV
                            </button>
                            <button class="admin-btn btn-word" id="exportWordBtn">
                                <i class="fas fa-file-word"></i> Word
                            </button>
                            <button class="admin-btn btn-primary" id="exportOrdersBtn">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                        </div>
                    </div>
                    <div class="batch-actions" style="margin-bottom: 1rem; display: none; gap: 10px; flex-wrap: wrap; align-items: center;">
                        <button class="admin-btn btn-success" id="markSelectedAsDeliveredBtn" disabled title="Seleccione pedidos para marcar como entregados">
                            <i class="fas fa-check-double"></i> Marcar Seleccionados como Entregados
                        </button>
                        <button class="admin-btn btn-info" id="selectAllVisibleBtn">
                            <i class="fas fa-check-square"></i> Seleccionar Visibles (No Entregados)
                        </button>
                        <button class="admin-btn btn-warning" id="deselectAllBtn" style="display: none;">
                            <i class="far fa-square"></i> Deseleccionar Todos
                        </button>
                        <span id="selectedOrdersCount" style="margin-left: 10px; font-weight: 500; color: #555;">0 pedidos seleccionados</span>
                    </div>
                    <div class="orders-cards-container" id="adminOrdersList"> <p style="text-align: center; width: 100%; padding: 2rem 0;">Cargando pedidos...</p> </div>
                </div>
            </section>

            <section id="customersContent" class="dashboard-section">
                <div class="customers-section">
                    <div class="section-header"> <h2>Clientes Registrados</h2> <div class="header-actions"> <div class="search-box"> <i class="fas fa-search"></i> <input type="text" placeholder="Buscar cliente..."> </div> </div> </div>
                    <div class="customers-table-container"> <table class="admin-table"> <thead> <tr> <th>ID</th> <th>Nombre</th> <th>Email</th> <th>Teléfono</th> <th>Registro</th> <th>Pedidos</th> <th>Acciones</th> </tr> </thead> <tbody> <tr> <td colspan="7" style="text-align:center;">Cargando...</td> </tr> </tbody> </table> </div>
                </div>
            </section>

            <section id="productsContent" class="dashboard-section">
                <div class="products-section">
                    <div class="section-header">
                        <h2>Gestión de Productos</h2>
                    </div>
                    <div class="admin-form">
                        <h2 class="form-title">Agregar Nuevo Producto</h2>
                        <form id="addProductForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="productName" class="form-label">Nombre</label>
                                    <input type="text" id="productName" name="productName" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="productPrice" class="form-label">Precio</label>
                                    <input type="number" id="productPrice" name="productPrice" class="form-control" required step="0.01" min="0">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="productCategory" class="form-label">Categoría</label>
                                    <select id="productCategory" name="productCategory" class="form-control" required>
                                        <option value="">Seleccione</option>
                                        <option value="Makis">Makis</option>
                                        <option value="Uramakis">Uramakis</option>
                                        <option value="Tempurizados">Tempurizados</option>
                                        <option value="Nigiri">Nigiri</option>
                                        <option value="Sashimi">Sashimi</option>
                                        <option value="Bebidas">Bebidas</option>
                                        <option value="Entradas">Entradas</option>
                                        <option value="Postres">Postres</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="productStock" class="form-label">Stock</label>
                                    <input type="number" id="productStock" name="productStock" class="form-control" min="0">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="productDescription" class="form-label">Descripción</label>
                                <textarea id="productDescription" name="productDescription" class="form-control" rows="3"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="productImageUrl" class="form-label">URL Imagen</label>
                                <input type="url" id="productImageUrl" name="productImageUrl" class="form-control">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="admin-btn btn-primary"><i class="fas fa-save"></i> Guardar</button>
                            </div>
                        </form>
                        <p id="addProductMessage" style="margin-top: 1rem; font-weight: bold;"></p>
                    </div>
                    <div class="products-table-section">
                        <div class="section-header"> <h2>Lista de Productos</h2> </div>
                        <div class="products-table-container"> <table class="admin-table"> <thead> <tr> <th>Imagen</th> <th>Nombre</th> <th>Precio</th> <th>Categoría</th> <th>Stock</th> <th>Estado</th> <th>Acciones</th> </tr> </thead> <tbody> <tr> <td colspan="7" style="text-align:center;">Cargando...</td> </tr> </tbody> </table> </div>
                    </div>
                </div>
            </section>

            <section id="premiosContent" class="dashboard-section">
                <div class="admin-card" style="flex: 1 1 350px; min-width: 340px; background: #f8fafc; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 2rem;">
                    <h2 style="margin-bottom: 0.5rem;"><i class="fas fa-gift"></i> Gestión de Premios de la Ruleta</h2>
                    <p style="color: #555; margin-bottom: 1.5rem;">Crea, edita o administra los premios disponibles en la ruleta que los clientes pueden ganar.</p>
                    <form id="addPrizeForm">
                        <input type="hidden" id="prizeId" name="prizeId">
                        <div class="form-group">
                            <label for="prizeName" class="form-label">🎁 Nombre del Premio</label>
                            <input type="text" id="prizeName" name="prizeName" class="form-control" placeholder="Ej: Rollo California Gratis, 15% Descuento, Bebida Gratis" required>
                        </div>
                        <div class="form-group">
                            <label for="prizeDescription" class="form-label">📝 Descripción</label>
                            <textarea id="prizeDescription" name="prizeDescription" class="form-control" rows="2" placeholder="Breve explicación de lo que incluye este premio"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="prizeType" class="form-label">📦 Tipo de Premio</label>
                            <select id="prizeType" name="prizeType" class="form-control" required>
                                <option value="producto">Producto</option>
                                <option value="descuento">Descuento</option>
                                <option value="servicio">Servicio</option>
                                <option value="otro">Otro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="prizeQuantity" class="form-label">🔢 Cantidad Disponible</label>
                            <input type="number" id="prizeQuantity" name="prizeQuantity" class="form-control" min="0" placeholder="Ej: 20 (dejar en blanco si es ilimitado)">
                        </div>
                        <div class="form-group">
                            <label for="prizeProbability" class="form-label">🎯 Probabilidad (%)</label>
                            <input type="number" id="prizeProbability" name="prizeProbability" class="form-control" min="1" max="100" placeholder="Ej: 5, 10, 20" required>
                        </div>
                        <div class="form-group">
                            <label for="prizeImageUrl" class="form-label">🖼️ Imagen del Premio (URL)</label>
                            <input type="url" id="prizeImageUrl" name="prizeImageUrl" class="form-control" placeholder="Opcional: https://...">
                        </div>
                        <div class="form-group" style="display: flex; align-items: center; gap: 10px;">
                            <label for="prizeActive" class="form-label" style="margin-bottom: 0;">✅ Estado Activo</label>
                            <input type="checkbox" id="prizeActive" name="prizeActive" checked>
                        </div>
                        <div class="form-actions" style="margin-top: 1rem;">
                            <button type="submit" class="admin-btn btn-primary"><i class="fas fa-save"></i> Guardar Premio</button>
                        </div>
                    </form>
                    <p id="addPrizeMessage" style="margin-top: 10px; font-weight: bold;"></p>
                    <div class="prize-list-section" style="margin-top: 2rem;">
                        <h3 style="margin-bottom: 1rem;"><i class="fas fa-list"></i> Lista de Premios</h3>
                        <div id="prizeList" class="prize-cards-container" style="display: flex; flex-wrap: wrap; gap: 1rem;">
                            <p>Cargando premios...</p>
                        </div>
                    </div>
                </div>
                <div class="admin-card" style="flex: 2 1 600px; min-width: 400px; background: #fff; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 2rem;">
                    <h2 style="margin-bottom: 0.5rem;"><i class="fas fa-scroll"></i> Historial de Giros</h2>
                    <p style="color: #555; margin-bottom: 1.5rem;">Revisa todos los giros realizados por los usuarios y los premios obtenidos.</p>
                    <div style="margin-bottom: 1rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                        <input type="text" id="filtroUsuario" class="form-control" placeholder="🔎 Usuario">
                        <input type="text" id="filtroPremio" class="form-control" placeholder="🎁 Premio">
                        <input type="date" id="filtroFecha" class="form-control" placeholder="📅 Fecha">
                        <select id="filtroEstado" class="form-control">
                            <option value="">Todos los estados</option>
                            <option value="pendiente">Pendiente</option>
                            <option value="entregado">Entregado</option>
                            <option value="canjeado">Canjeado</option>
                        </select>
                    </div>
                    <div style="overflow-x:auto;">
                        <table class="admin-table" style="min-width: 600px;">
                            <thead>
                                <tr>
                                    <th>Usuario</th>
                                    <th>Premio Ganado</th>
                                    <th>Fecha</th>
                                    <th>Estado del Premio</th>
                                    <th>Acción</th>
                                </tr>
                            </thead>
                            <tbody id="tablaHistorialGiros">
                                <tr><td colspan="5" style="text-align:center;">Cargando historial...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="admin-card" style="flex: 1 1 350px; min-width: 340px; background: #f8fafc; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 2rem;">
                    <h2 style="margin-bottom: 0.5rem;"><i class="fas fa-chart-bar"></i> Estadísticas de la Ruleta</h2>
                    <p style="color: #555; margin-bottom: 1.5rem;">Visualiza datos generales para mejorar la experiencia de promociones.</p>
                    <ul style="list-style: none; padding: 0; margin: 0 0 1.5rem 0;">
                        <li><b>Total de giros realizados:</b> <span id="statTotalGiros">0</span></li>
                        <li><b>Premios más ganados:</b> <span id="statPremiosPopulares">-</span></li>
                        <li><b>Participación hoy:</b> <span id="statParticipacionHoy">0</span></li>
                        <li><b>% premios entregados:</b> <span id="statPremiosEntregados">0%</span></li>
                    </ul>
                    <button class="admin-btn btn-success" id="btnDescargarExcel"><i class="fas fa-file-excel"></i> Descargar reporte en Excel</button>
                </div>
            </section>

            <section id="reportsContent" class="dashboard-section">
                <div class="reports-section">
                    <div class="section-header" style="display:flex;align-items:center;justify-content:space-between;gap:1.5rem;">
                        <h2>Reportes</h2>
                        <div style="display:flex;align-items:center;gap:18px;">
                            <div class="report-type-selector" style="display:flex;align-items:center;gap:10px;">
                                <span id="reportTypeIcon" class="report-type-icon" style="font-size:1.5em;color:#3498db;"><i class="fas fa-chart-bar"></i></span>
                                <select id="reportTypeSelect" class="admin-select">
                                    <option value="ventas" selected>Reporte de ventas</option>
                                    <option value="pedidos">Reporte de pedidos</option>
                                    <option value="clientes">Reporte de clientes</option>
                                    <option value="productos">Reporte de productos</option>
                                </select>
                            </div>
                            </div>
                    </div>
            
                    <div id="ventasReportContent">
                        <!-- Filtros de fecha mejorados -->
    <div class="date-filters">
        <div class="filter-group">
            <label for="salesDateRangeFilter">Ver ventas por:</label>
            <select id="salesDateRangeFilter" class="admin-select">
                <option value="today">Hoy</option>
                <option value="week">Últimos 7 días</option>
                <option value="month" selected>Últimos 30 días</option>
                <option value="quarter">Últimos 90 días</option>
                <option value="semester">Últimos 6 meses</option>
                <option value="year">Último año</option>
                <option value="custom">Rango Personalizado</option>
            </select>
        </div>
        <!-- Contenedor para el rango de fechas personalizado (oculto por defecto) -->
        <div id="salesCustomDateContainer" class="filter-group" style="display: none; gap: 10px; align-items: flex-end;">
            <div>
                <label for="salesStartDate">Desde:</label>
                <input type="date" id="salesStartDate" class="admin-input">
            </div>
            <div>
                <label for="salesEndDate">Hasta:</label>
                <input type="date" id="salesEndDate" class="admin-input">
            </div>
            <button id="applyCustomDateFilter" class="admin-button">Aplicar</button>
        </div>
    </div>
                        
                        <div class="metrics-grid">
                            <div class="metric-card"><div class="metric-info"><h3>Cargando...</h3><div class="metric-value">...</div></div></div>
                            <div class="metric-card"><div class="metric-info"><h3>Cargando...</h3><div class="metric-value">...</div></div></div>
                            <div class="metric-card"><div class="metric-info"><h3>Cargando...</h3><div class="metric-value">...</div></div></div>
                            <div class="metric-card"><div class="metric-info"><h3>Cargando...</h3><div class="metric-value">...</div></div></div>
                        </div>
            
                        <div class="charts-grid">
                            <!-- Añadimos un ID a este 'chart-card' para poder cambiar su título -->
                            <div class="chart-card" id="salesChartCard">
                                <h3>Ventas (Últimos 30 días)</h3>
                                <div class="chart-container"><canvas id="salesChart"></canvas></div>
                            </div>
                            <div class="chart-card">
                                <h3>Ventas por Categoría</h3>
                                <div class="chart-container"><canvas id="categoryChart"></canvas></div>
                            </div>
                        </div>
                    </div>
            
                    <div id="pedidosReportContent" style="display:none;">
    <div class="report-filters">
        <div class="filter-group">
            <label for="pedidosStatusFilter">Filtrar por Estado:</label>
            <select id="pedidosStatusFilter" class="admin-select">
                <option value="all" selected>Todos los estados</option>
                <option value="pending">Pendiente</option>
                <option value="processing">En preparación</option>
                <option value="shipped">En camino</option>
                <option value="delivered">Entregado</option>
                <option value="cancelled">Cancelado</option>
            </select>
        </div>
        <div class="filter-group">
            <label for="pedidosSourceFilter">Filtrar por Origen:</label>
            <select id="pedidosSourceFilter" class="admin-select">
                <option value="all" selected>Todos los orígenes</option>
                <option value="web_user">Usuario Web</option>
                <option value="web_guest">Invitado Web</option>
                <option value="admin_manual">Manual</option>
            </select>
        </div>
        <div class="filter-group">
            <label for="pedidosSortFilter">Ordenar por:</label>
            <select id="pedidosSortFilter" class="admin-select">
                <option value="-createdAt" selected>Más Recientes</option>
                <option value="createdAt">Más Antiguos</option>
                <option value="-totalAmount">Mayor Monto</option>
                <option value="totalAmount">Menor Monto</option>
            </select>
        </div>
        <div class="export-buttons" style="margin-left: auto;">
            <button id="exportPedidosCSV" class="admin-button secondary-button"><i class="fas fa-file-csv"></i> Exportar a CSV</button>
            <button id="exportPedidosPDF" class="admin-button secondary-button"><i class="fas fa-file-pdf"></i> Exportar a PDF</button>
        </div>
    </div>

    <div class="table-container">
        <table class="admin-table" id="pedidosReportTable">
            <thead>
                <tr>
                    <th>ID Pedido</th>
                    <th>Cliente</th>
                    <th>Fecha</th>
                    <th>Origen</th>
                    <th>Items</th>
                    <th>Monto Total</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>
    
    <div class="pagination-controls" id="pedidosPagination">
        </div>
</div>

<div id="clientesReportContent" style="display:none;">
    <div class="report-filters">
        <div class="filter-group">
            <label for="clientesSortFilter">Mostrar Top Clientes por:</label>
            <select id="clientesSortFilter" class="admin-select">
                <option value="-totalSpent" selected>Mayor Gasto</option>
                <option value="orderCount">Más Pedidos</option>
            </select>
        </div>
        <div class="export-buttons" style="margin-left: auto;">
            <button id="exportClientesCSV" class="admin-button secondary-button"><i class="fas fa-file-csv"></i> Exportar a CSV</button>
            <button id="exportClientesPDF" class="admin-button secondary-button"><i class="fas fa-file-pdf"></i> Exportar a PDF</button>
        </div>
    </div>

    <div class="table-container">
        <table class="admin-table" id="clientesReportTable">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Cliente</th>
                    <th>Email</th>
                    <th class="text-center">Pedidos Realizados</th>
                    <th class="text-center">Gasto Total</th>
                    <th>Último Pedido</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>
</div>
<div id="productosReportContent" style="display:none;">
    <div class="report-filters">
        <div class="filter-group">
            <label for="productosSortFilter">Mostrar Top Productos por:</label>
            <select id="productosSortFilter" class="admin-select">
                <option value="-unitsSold" selected>Más Vendidos</option>
                <option value="-totalRevenue">Mayores Ingresos</option>
            </select>
        </div>
        <div class="export-buttons" style="margin-left: auto;">
            <button id="exportProductosCSV" class="admin-button secondary-button"><i class="fas fa-file-csv"></i> Exportar a CSV</button>
            <button id="exportProductosPDF" class="admin-button secondary-button"><i class="fas fa-file-pdf"></i> Exportar a PDF</button>
        </div>
    </div>

    <div class="table-container">
        <table class="admin-table" id="productosReportTable">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Producto</th>
                    <th>Categoría</th>
                    <th class="text-center">Unidades Vendidas</th>
                    <th class="text-center">Ingresos Generados</th>
                    <th class="text-center">Stock Actual</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>
</div>
                </div>
            </section>

            <section id="configuracionContent" class="dashboard-section">
                <div class="admin-user" style="margin-bottom: 2rem; display: flex; flex-direction: column; align-items: center;">
                    <div class="user-info" style="text-align: center;">
                        <span class="user-name" id="adminConfigUsername">Admin</span>
                        <span class="user-role" id="adminConfigRole">Administrador</span>
                        <span class="user-email" id="adminConfigEmail" style="display:block; color:#888; font-size:0.98em; margin-top:2px;"></span>
                        <span class="user-phone" id="adminConfigPhone" style="display:block; color:#888; font-size:0.98em; margin-top:2px;"></span>
                    </div>
                </div>
                <div class="configuracion-section">
                    <div class="section-header">
                        <h2>Configuración General</h2>
                    </div>
                    
                    <div class="admin-profile-section admin-form">
                        <h2 class="form-title">Perfil de Administrador</h2>
                        <form id="adminProfileForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="adminFullName" class="form-label">Nombre Completo</label>
                                    <input type="text" id="adminFullName" name="fullName" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="adminEmail" class="form-label">Correo Electrónico</label>
                                    <input type="email" id="adminEmail" name="email" class="form-control" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="adminPhone" class="form-label">Teléfono</label>
                                    <input type="tel" id="adminPhone" name="phone" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label for="adminRoleInput" class="form-label">Rol</label> <input type="text" id="adminRoleInput" name="role" class="form-control" readonly>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="adminAvatar" class="form-label">Avatar</label>
                                <input type="file" id="adminAvatar" name="avatar" class="form-control" accept="image/*">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="admin-btn btn-primary">
                                    <i class="fas fa-save"></i> Guardar Cambios
                                </button>
                            </div>
                        </form>
                         <p id="adminProfileMessage" style="margin-top: 1rem; font-weight: bold;"></p>
                    </div>

                    <div class="admin-password-section admin-form" style="margin-top: 2rem;">
                        <h2 class="form-title">Cambiar Contraseña</h2>
                        <form id="adminPasswordForm">
                            <div class="form-group">
                                <label for="currentPassword" class="form-label">Contraseña Actual</label>
                                <input type="password" id="currentPassword" name="currentPassword" class="form-control" required>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="newPassword" class="form-label">Nueva Contraseña</label>
                                    <input type="password" id="newPassword" name="newPassword" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="confirmPassword" class="form-label">Confirmar Contraseña</label>
                                    <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" required>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="admin-btn btn-primary">
                                    <i class="fas fa-key"></i> Actualizar Contraseña
                                </button>
                            </div>
                        </form>
                        <p id="adminPasswordMessage" style="margin-top: 1rem; font-weight: bold;"></p>
                    </div>

                    <div class="carousel-admin-section admin-form" style="margin-top: 2rem;">
                        <h2 class="form-title">Imágenes del Carrusel Principal</h2>
                        
                        <form id="addCarouselImageForm">
                            <div class="form-group">
                                <label for="carouselImageFile" class="form-label">Agregar Nueva Imagen (JPG, PNG, GIF - Máx 5MB)</label>
                                <input type="file" id="carouselImageFile" name="carouselImageFile" class="form-control" accept="image/jpeg, image/png, image/gif" required>
                            </div>
                            <div class="form-group">
                                <label for="carouselImageTitle" class="form-label">Título (Opcional)</label>
                                <input type="text" id="carouselImageTitle" name="title" class="form-control" placeholder="Ej: Promo Verano">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="admin-btn btn-success">
                                    <i class="fas fa-plus"></i> Agregar Imagen al Carrusel
                                </button>
                            </div>
                        </form>
                        <p id="carouselAdminMessage" style="margin-top: 1rem; font-weight: bold;"></p>

                        <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Imágenes Actuales en el Carrusel:</h3>
                        <p id="carouselCountMessage" style="margin-bottom: 1rem; color: #555;">Se requieren mínimo 3 imágenes.</p>
                        <div id="currentCarouselImages" class="carousel-images-list" style="display: flex; gap: 1rem; flex-wrap: wrap; border: 1px solid #eee; padding: 1rem; border-radius: 8px; min-height: 100px;">
                            <p>Cargando imágenes...</p>
                        </div>
                    </div>
                    </div>
            </section>

            <section id="couponsContent" class="dashboard-section">
                <div class="coupons-section">
                    <div class="section-header"> <h2>Cupones y Promociones</h2> </div>
                    <div class="coupons-admin-grid">
                        <div class="coupon-form-card">
                            <h3>Crear Cupón</h3>
                            <form id="createCouponForm">
                                <div class="form-group"><label>Nombre</label><input type="text" name="couponName" required></div>
                                <div class="form-group"><label>Código</label><input type="text" name="couponCode" required></div>
                                <div class="form-group"><label>Tipo</label><select name="discountType" required><option value="porcentaje">Porcentaje</option><option value="monto">Monto fijo</option></select></div>
                                <div class="form-group"><label>Valor</label><input type="number" name="discountValue" min="1" required></div>
                                <div class="form-group"><label>Válido desde</label><input type="date" name="startDate" required></div>
                                <div class="form-group"><label>Válido hasta</label><input type="date" name="endDate" required></div>
                                <button type="submit" class="admin-btn btn-primary" style="width:100%;margin-top:1rem;">Crear</button>
                            </form>
                        </div>
                        <div class="coupon-preview-card">
                            <h3>Cupones Activos</h3>
                            <p style="color:#888;">No hay cupones activos.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="registrarPedidoContent" class="dashboard-section">
                <div class="admin-form" style="max-width:900px;margin:2rem auto 0 auto;">
                    <h3 style="margin-bottom:1.2rem;display:flex;align-items:center;gap:10px;"><i class="fas fa-clipboard-list"></i> Pedidos Registrados Manualmente</h3>
                    <table class="admin-table" id="adminManualOrdersTable">
                        <thead>
                            <tr>
                                <th>ID Pedido</th>
                                <th>Cliente</th>
                                <th>Teléfono</th>
                                <th>Dirección</th>
                                <th>Zona</th>
                                <th>Total</th>
                                <th>Fecha</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="8" style="text-align:center;">No hay pedidos registrados manualmente.</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

        </main>
    </div>

    <div id="registerOrderModal" class="admin-modal" style="display:none;position:fixed;z-index:2000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;overflow-y:auto;padding:20px 0;">
        <div class="admin-modal-content" style="background:#fff;padding:2rem 2.5rem;border-radius:12px;max-width:550px;width:95vw;box-shadow:0 8px 32px rgba(44,62,80,0.18);position:relative; margin: auto;">
            <button id="closeRegisterOrderModalBtn" style="position:absolute;top:18px;right:18px;background:none;border:none;font-size:1.5em;color:#888;cursor:pointer;"><i class="fas fa-times"></i></button>
            <h2 style="margin-bottom:1.2rem;display:flex;align-items:center;gap:10px;"><i class="fas fa-plus"></i> Registrar Pedido Manual</h2>
            <form id="registerOrderForm">
                <div class="form-group">
                    <label class="form-label">Nombre del Cliente</label>
                    <input type="text" name="nombreCliente" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Teléfono</label>
                    <input type="tel" name="telefonoCliente" class="form-control" required pattern="[0-9]{8}" title="Ingrese 8 dígitos">
                </div>
                <div class="form-group">
                    <label class="form-label">Dirección</label>
                    <input type="text" name="direccionCliente" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="adminOrderZoneSelect" class="form-label">Zona de envío <span class="required" style="color:red;">*</span></label>
                    <select id="adminOrderZoneSelect" name="zonaEnvio" class="form-control custom-select" required>
                        <option value="">Selecciona una zona</option>
                        <option value="centrica" data-cost="2.00">CÉNTRICA (Usulután Ciudad, hasta Puente Gavidia, El Calvario, Los Pinos) - $2.00</option>
                        <option value="puente-ugb" data-cost="2.50">Del Puente Gavidia hasta la UGB - $2.50</option>
                        <option value="ugb-montanita" data-cost="3.00">De la UGB hasta La Montañita - $3.00</option>
                        <option value="montanita-ereguayquin" data-cost="3.50">Desde La Montañita hasta Ereguayquín (Carretera Litoral) - $3.50</option>
                        <option value="ereguayquin" data-cost="4.00">Dentro de Ereguayquín - $4.00</option>
                        <option value="sta-maria-centro" data-cost="3.00">Sta. María Centro - $3.00</option>
                        <option value="sta-elena" data-cost="4.00">Sta. Elena - $4.00</option>
                        <option value="pto-parada" data-cost="8.00">Pto. Parada - $8.00</option>
                        <option value="pinos-lemus" data-cost="2.50">De Los Pinos hasta Lemus Home - $2.50</option>
                        <option value="lemus-tierramar" data-cost="3.00">Desde Lemus Home hasta Tierramar - $3.00</option>
                        <option value="tierramar-poza" data-cost="3.50">Desde Tierramar hasta La Poza - $3.50</option>
                        <option value="poza-chilamate" data-cost="4.00">Desde La Poza hasta Chilamate - $4.00</option>
                        <option value="calvario-veraneras" data-cost="2.00">Desde El Calvario hasta Las Veraneras - $2.00</option>
                        <option value="estadio-cruz1" data-cost="2.50">Desde el Estadio Sergio Torres Rivera hasta La Cruz 1 - $2.50</option>
                        <option value="cruz1-bypass" data-cost="3.00">Desde La Cruz 1 hasta el By Pass - $3.00</option>
                        <option value="otra" data-cost="0.00">Otra zona (contactaremos para costo)</option>
                    </select>
                </div>
                <div id="adminOrderShippingMsg" style="font-size: 0.9em; color: #E67E22; margin-bottom: 10px; text-align: center; display:none;"></div>
                <div class="form-group">
                    <label class="form-label">Punto de Referencia</label>
                    <textarea name="puntoReferencia" class="form-control" placeholder="Ej: Casa esquina color azul" rows="2"></textarea>
                </div>
    
                <div class="form-group">
                    <label class="form-label">Productos</label>
                    <div id="orderProductsList">
                        </div>
                    <button type="button" class="admin-btn btn-primary" id="addProductToOrderBtn" style="margin-top:10px;"><i class="fas fa-plus"></i> Agregar Producto</button>
                </div>
    
                <div class="form-group" style="display: none;"> {/* Opcionalmente ocultar si se controla 100% por el select */}
                    <label class="form-label">Costo de Envío (Calculado)</label>
                    <input type="number" name="costoEnvio" id="adminOrderCostoEnvioInput" class="form-control" value="0" step="0.01" min="0" required readonly>
                </div>
    
                <div class="form-group" style="margin-top:1.2rem; border-top: 1px solid #eee; padding-top: 1rem;">
                    <p style="display: flex; justify-content: space-between;"><span>Subtotal Productos:</span> <strong id="orderSubtotalProducts">$0.00</strong></p>
                    <p style="display: flex; justify-content: space-between;"><span>Costo de Envío:</span> <strong id="orderShippingCostDisplay">$0.00</strong></p>
                    <p style="display: flex; justify-content: space-between; font-size:1.3em; font-weight:bold; color: var(--admin-accent); margin-top:0.5rem;"><span>Total General:</span> <strong id="orderTotalGeneral">$0.00</strong></p>
                </div>
                <p id="adminOrderRegistrationMessage" style="margin-top: 1rem; font-weight: bold;"></p>
                <div class="form-actions" style="margin-top:1.5rem;">
                    <button type="submit" class="admin-btn btn-success" style="width:100%;"><i class="fas fa-save"></i> Registrar Pedido</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <script type="module" src="js/admin.js"></script>
    <script src="js/docx.min.js"></script>
    <script src="js/qrious.min.js"></script>
</body>

</html>